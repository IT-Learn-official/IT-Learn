<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IT Learn | Account Verified</title>
  <link rel="stylesheet" href="verify-success.css" />
  <script src="/translations.js"></script>
</head>
<body>

<header class="top-bar">
  <div class="logo">
    <img src="/favicon.ico" alt="IT Learn logo">
    <span>IT Learn</span>
  </div>
  <a href="index.html" class="back-link" data-translate="backToHome"></a>
</header>

<main class="hero">
  <div class="login-card">
    <span class="badge" data-translate="emailVerifiedBadge">Email verified</span>
    <h1 data-translate="emailVerifiedHeading">Email Verified!</h1>
    <p class="subtitle" data-translate="verifySuccessMessage">Your account has been successfully confirmed. You can now login to continue your learning journey.</p>
    <a class="primary-btn" href="#" id="loginBtn" data-translate="goToLogin">Go to Login</a>
    <p class="redirect-text"><span data-translate="autoRedirecting">Automatically redirecting in</span> <span id="countdown">5</span> <span data-translate="seconds">seconds...</span></p>
  </div>
</main>

  <script>
    const storedOrigin = localStorage.getItem('oauth_origin');
    const currentOrigin = window.location.origin;
    
    if (storedOrigin && storedOrigin !== currentOrigin && storedOrigin !== 'https://itlearn.be') {
      const currentUrl = new URL(window.location.href);
      const targetUrl = `${storedOrigin}${currentUrl.pathname}${currentUrl.search}`;
      console.log(`Redirecting from ${currentOrigin} to ${storedOrigin}`);
      window.location.replace(targetUrl);
      throw new Error('Redirecting to correct domain');
    }
    
    document.getElementById('loginBtn').addEventListener('click', (e) => {
      e.preventDefault();
      const targetOrigin = storedOrigin || window.location.origin;
      window.location.href = `${targetOrigin}/login.html`;
    });
    
    let countdown = 5;
    const countdownEl = document.getElementById("countdown");
    const interval = setInterval(() => {
      countdown--;
      countdownEl.textContent = countdown;
      if (countdown <= 0) {
        clearInterval(interval);
        const targetOrigin = storedOrigin || window.location.origin;
        window.location.href = `${targetOrigin}/login.html`;
      }
    }, 1000);
  </script>
</body>
</html>

